import{bp as Ne,ae as Fe,b6 as Le,b as G,P as K,d as T,a as J,e as Z,a8 as Pe,S as ye,o as W,q as B,n as P,g as O,r as q,I as A,v as F,t as L,s as v,h as j,_ as ue,k as xe,Q as _e,R as pe,Z as de,y as E,a2 as V,aq as fe,b2 as Ee,ar as se,dm as ze,dn as De,A as Oe,aC as Re,C as d,E as ee,aO as Ue,aP as Ve,bD as je,b4 as te,p as qe,aH as Ke,aJ as Ze,i as me,ad as Ge,dp as ve,z as ge,bW as Je,aa as ce,ax as le,x as Qe,U as Se,f as et,w as C,J as be,d8 as tt,d9 as we,M as st,N as it,O as ot}from"./index.50081dc1.js";import{E as at,a as rt}from"./el-form-item.5eda86ef.js";import{E as nt}from"./el-input.975228c3.js";import{E as ht}from"./el-card.6353d1b4.js";import{E as ct}from"./el-link.29d655ef.js";import{b as lt,a as ut,E as pt}from"./el-divider.674e72f3.js";import"./el-checkbox.47029e22.js";import{c as D}from"./el-tag.43523872.js";import{U as Xe}from"./event.776e7e11.js";import"./_Uint8Array.3bbe8fb3.js";import"./isEqual.421e0394.js";const dt=(e,t,s)=>Fe(e.subTree).filter(i=>{var r;return Le(i)&&((r=i.type)==null?void 0:r.name)===t&&!!i.component}).map(i=>i.component.uid).map(i=>s[i]).filter(i=>!!i),ft=(e,t)=>{const s={},o=Ne([]);return{children:o,addChild:r=>{s[r.uid]=r,o.value=dt(e,t,s)},removeChild:r=>{delete s[r],o.value=o.value.filter(h=>h.uid!==r)}}},gt=G({decimalSeparator:{type:String,default:"."},groupSeparator:{type:String,default:","},precision:{type:Number,default:0},formatter:Function,value:{type:K([Number,Object]),default:0},prefix:String,suffix:String,title:String,valueStyle:{type:K([String,Object,Array])}}),mt=T({name:"ElStatistic"}),vt=T({...mt,props:gt,setup(e,{expose:t}){const s=e,o=J("statistic"),a=Z(()=>{const{value:i,formatter:r,precision:h,decimalSeparator:c,groupSeparator:l}=s;if(Pe(r))return r(i);if(!ye(i))return i;let[n,u=""]=String(i).split(".");return u=u.padEnd(h,"0").slice(0,h>0?h:0),n=n.replace(/\B(?=(\d{3})+(?!\d))/g,l),[n,u].join(u?c:"")});return t({displayValue:a}),(i,r)=>(W(),B("div",{class:P(O(o).b())},[i.$slots.title||i.title?(W(),B("div",{key:0,class:P(O(o).e("head"))},[q(i.$slots,"title",{},()=>[A(F(i.title),1)])],2)):L("v-if",!0),v("div",{class:P(O(o).e("content"))},[i.$slots.prefix||i.prefix?(W(),B("div",{key:0,class:P(O(o).e("prefix"))},[q(i.$slots,"prefix",{},()=>[v("span",null,F(i.prefix),1)])],2)):L("v-if",!0),v("span",{class:P(O(o).e("number")),style:j(i.valueStyle)},F(O(a)),7),i.$slots.suffix||i.suffix?(W(),B("div",{key:1,class:P(O(o).e("suffix"))},[q(i.$slots,"suffix",{},()=>[v("span",null,F(i.suffix),1)])],2)):L("v-if",!0)],2)],2))}});var bt=ue(vt,[["__file","statistic.vue"]]);const wt=xe(bt),ie=Symbol("tabsRootContextKey"),Ct=G({tabs:{type:K(Array),default:()=>_e([])}}),He="ElTabBar",yt=T({name:He}),xt=T({...yt,props:Ct,setup(e,{expose:t}){const s=e,o=se(),a=pe(ie);a||de(He,"<el-tabs><el-tab-bar /></el-tabs>");const i=J("tabs"),r=E(),h=E(),c=()=>{let n=0,u=0;const p=["top","bottom"].includes(a.props.tabPosition)?"width":"height",g=p==="width"?"x":"y",b=g==="x"?"left":"top";return s.tabs.every(f=>{var m,w;const S=(w=(m=o.parent)==null?void 0:m.refs)==null?void 0:w[`tab-${f.uid}`];if(!S)return!1;if(!f.active)return!0;n=S[`offset${D(b)}`],u=S[`client${D(p)}`];const Y=window.getComputedStyle(S);return p==="width"&&(s.tabs.length>1&&(u-=Number.parseFloat(Y.paddingLeft)+Number.parseFloat(Y.paddingRight)),n+=Number.parseFloat(Y.paddingLeft)),!1}),{[p]:`${u}px`,transform:`translate${D(g)}(${n}px)`}},l=()=>h.value=c();return V(()=>s.tabs,async()=>{await fe(),l()},{immediate:!0}),Ee(r,()=>l()),t({ref:r,update:l}),(n,u)=>(W(),B("div",{ref_key:"barRef",ref:r,class:P([O(i).e("active-bar"),O(i).is(O(a).props.tabPosition)]),style:j(h.value)},null,6))}});var _t=ue(xt,[["__file","tab-bar.vue"]]);const Et=G({panes:{type:K(Array),default:()=>_e([])},currentName:{type:[String,Number],default:""},editable:Boolean,type:{type:String,values:["card","border-card",""],default:""},stretch:Boolean}),Ot={tabClick:(e,t,s)=>s instanceof Event,tabRemove:(e,t)=>t instanceof Event},Ce="ElTabNav",St=T({name:Ce,props:Et,emits:Ot,setup(e,{expose:t,emit:s}){const o=se(),a=pe(ie);a||de(Ce,"<el-tabs><tab-nav /></el-tabs>");const i=J("tabs"),r=ze(),h=De(),c=E(),l=E(),n=E(),u=E(),p=E(!1),g=E(0),b=E(!1),f=E(!0),m=Z(()=>["top","bottom"].includes(a.props.tabPosition)?"width":"height"),w=Z(()=>({transform:`translate${m.value==="width"?"X":"Y"}(-${g.value}px)`})),S=()=>{if(!c.value)return;const x=c.value[`offset${D(m.value)}`],_=g.value;if(!_)return;const y=_>x?_-x:0;g.value=y},Y=()=>{if(!c.value||!l.value)return;const x=l.value[`offset${D(m.value)}`],_=c.value[`offset${D(m.value)}`],y=g.value;if(x-y<=_)return;const M=x-y>_*2?y+_:x-_;g.value=M},z=async()=>{const x=l.value;if(!p.value||!n.value||!c.value||!x)return;await fe();const _=n.value.querySelector(".is-active");if(!_)return;const y=c.value,M=["top","bottom"].includes(a.props.tabPosition),$=_.getBoundingClientRect(),H=y.getBoundingClientRect(),N=M?x.offsetWidth-H.width:x.offsetHeight-H.height,I=g.value;let X=I;M?($.left<H.left&&(X=I-(H.left-$.left)),$.right>H.right&&(X=I+$.right-H.right)):($.top<H.top&&(X=I-(H.top-$.top)),$.bottom>H.bottom&&(X=I+($.bottom-H.bottom))),X=Math.max(X,0),g.value=Math.min(X,N)},R=()=>{var x;if(!l.value||!c.value)return;e.stretch&&((x=u.value)==null||x.update());const _=l.value[`offset${D(m.value)}`],y=c.value[`offset${D(m.value)}`],M=g.value;y<_?(p.value=p.value||{},p.value.prev=M,p.value.next=M+y<_,_-M<y&&(g.value=_-y)):(p.value=!1,M>0&&(g.value=0))},oe=x=>{const _=x.code,{up:y,down:M,left:$,right:H}=te;if(![y,M,$,H].includes(_))return;const N=Array.from(x.currentTarget.querySelectorAll("[role=tab]:not(.is-disabled)")),I=N.indexOf(x.target);let X;_===$||_===y?I===0?X=N.length-1:X=I-1:I<N.length-1?X=I+1:X=0,N[X].focus({preventScroll:!0}),N[X].click(),Q()},Q=()=>{f.value&&(b.value=!0)},k=()=>b.value=!1;return V(r,x=>{x==="hidden"?f.value=!1:x==="visible"&&setTimeout(()=>f.value=!0,50)}),V(h,x=>{x?setTimeout(()=>f.value=!0,50):f.value=!1}),Ee(n,R),Oe(()=>setTimeout(()=>z(),0)),Re(()=>R()),t({scrollToActiveTab:z,removeFocus:k}),V(()=>e.panes,()=>o.update(),{flush:"post",deep:!0}),()=>{const x=p.value?[d("span",{class:[i.e("nav-prev"),i.is("disabled",!p.value.prev)],onClick:S},[d(ee,null,{default:()=>[d(Ue,null,null)]})]),d("span",{class:[i.e("nav-next"),i.is("disabled",!p.value.next)],onClick:Y},[d(ee,null,{default:()=>[d(Ve,null,null)]})])]:null,_=e.panes.map((y,M)=>{var $,H,N,I;const X=y.uid,ae=y.props.disabled,re=(H=($=y.props.name)!=null?$:y.index)!=null?H:`${M}`,ne=!ae&&(y.isClosable||e.editable);y.index=`${M}`;const Te=ne?d(ee,{class:"is-icon-close",onClick:U=>s("tabRemove",y,U)},{default:()=>[d(je,null,null)]}):null,ke=((I=(N=y.slots).label)==null?void 0:I.call(N))||y.props.label,Ae=!ae&&y.active?0:-1;return d("div",{ref:`tab-${X}`,class:[i.e("item"),i.is(a.props.tabPosition),i.is("active",y.active),i.is("disabled",ae),i.is("closable",ne),i.is("focus",b.value)],id:`tab-${re}`,key:`tab-${X}`,"aria-controls":`pane-${re}`,role:"tab","aria-selected":y.active,tabindex:Ae,onFocus:()=>Q(),onBlur:()=>k(),onClick:U=>{k(),s("tabClick",y,re,U)},onKeydown:U=>{ne&&(U.code===te.delete||U.code===te.backspace)&&s("tabRemove",y,U)}},[ke,Te])});return d("div",{ref:n,class:[i.e("nav-wrap"),i.is("scrollable",!!p.value),i.is(a.props.tabPosition)]},[x,d("div",{class:i.e("nav-scroll"),ref:c},[d("div",{class:[i.e("nav"),i.is(a.props.tabPosition),i.is("stretch",e.stretch&&["top","bottom"].includes(a.props.tabPosition))],ref:l,style:w.value,role:"tablist",onKeydown:oe},[e.type?null:d(_t,{ref:u,tabs:[...e.panes]},null),_])])])}}}),Xt=G({type:{type:String,values:["card","border-card",""],default:""},closable:Boolean,addable:Boolean,modelValue:{type:[String,Number]},editable:Boolean,tabPosition:{type:String,values:["top","right","bottom","left"],default:"top"},beforeLeave:{type:K(Function),default:()=>!0},stretch:Boolean}),he=e=>Ze(e)||ye(e),Ht={[Xe]:e=>he(e),tabClick:(e,t)=>t instanceof Event,tabChange:e=>he(e),edit:(e,t)=>["remove","add"].includes(t),tabRemove:e=>he(e),tabAdd:()=>!0},Wt=T({name:"ElTabs",props:Xt,emits:Ht,setup(e,{emit:t,slots:s,expose:o}){var a;const i=J("tabs"),{children:r,addChild:h,removeChild:c}=ft(se(),"ElTabPane"),l=E(),n=E((a=e.modelValue)!=null?a:"0"),u=async(f,m=!1)=>{var w,S,Y;if(!(n.value===f||me(f)))try{await((w=e.beforeLeave)==null?void 0:w.call(e,f,n.value))!==!1&&(n.value=f,m&&(t(Xe,f),t("tabChange",f)),(Y=(S=l.value)==null?void 0:S.removeFocus)==null||Y.call(S))}catch{}},p=(f,m,w)=>{f.props.disabled||(u(m,!0),t("tabClick",f,w))},g=(f,m)=>{f.props.disabled||me(f.props.name)||(m.stopPropagation(),t("edit",f.props.name,"remove"),t("tabRemove",f.props.name))},b=()=>{t("edit",void 0,"add"),t("tabAdd")};return V(()=>e.modelValue,f=>u(f)),V(n,async()=>{var f;await fe(),(f=l.value)==null||f.scrollToActiveTab()}),qe(ie,{props:e,currentName:n,registerPane:h,unregisterPane:c}),o({currentName:n}),()=>{const f=s["add-icon"],m=e.editable||e.addable?d("span",{class:i.e("new-tab"),tabindex:"0",onClick:b,onKeydown:Y=>{Y.code===te.enter&&b()}},[f?q(s,"add-icon"):d(ee,{class:i.is("icon-plus")},{default:()=>[d(Ke,null,null)]})]):null,w=d("div",{class:[i.e("header"),i.is(e.tabPosition)]},[m,d(St,{ref:l,currentName:n.value,editable:e.editable,type:e.type,panes:r.value,stretch:e.stretch,onTabClick:p,onTabRemove:g},null)]),S=d("div",{class:i.e("content")},[q(s,"default")]);return d("div",{class:[i.b(),i.m(e.tabPosition),{[i.m("card")]:e.type==="card",[i.m("border-card")]:e.type==="border-card"}]},[...e.tabPosition!=="bottom"?[w,S]:[S,w]])}}}),Yt=G({label:{type:String,default:""},name:{type:[String,Number]},closable:Boolean,disabled:Boolean,lazy:Boolean}),Mt=["id","aria-hidden","aria-labelledby"],We="ElTabPane",$t=T({name:We}),Bt=T({...$t,props:Yt,setup(e){const t=e,s=se(),o=Ge(),a=pe(ie);a||de(We,"usage: <el-tabs><el-tab-pane /></el-tabs/>");const i=J("tab-pane"),r=E(),h=Z(()=>t.closable||a.props.closable),c=ve(()=>{var g;return a.currentName.value===((g=t.name)!=null?g:r.value)}),l=E(c.value),n=Z(()=>{var g;return(g=t.name)!=null?g:r.value}),u=ve(()=>!t.lazy||l.value||c.value);V(c,g=>{g&&(l.value=!0)});const p=ge({uid:s.uid,slots:o,props:t,paneName:n,active:c,index:r,isClosable:h});return Oe(()=>{a.registerPane(p)}),Je(()=>{a.unregisterPane(p.uid)}),(g,b)=>O(u)?ce((W(),B("div",{key:0,id:`pane-${O(n)}`,class:P(O(i).b()),role:"tabpanel","aria-hidden":!O(c),"aria-labelledby":`tab-${O(n)}`},[q(g.$slots,"default")],10,Mt)),[[le,O(c)]]):L("v-if",!0)}});var Ye=ue(Bt,[["__file","tab-pane.vue"]]);const Me=xe(Wt,{TabPane:Ye}),$e=Qe(Ye);const Be={};Be.getData=e=>new Promise((t,s)=>{let o={};It(e).then(a=>{o.arrayBuffer=a;try{o.orientation=Nt(a)}catch{o.orientation=-1}t(o)}).catch(a=>{s(a)})});function It(e){let t=null;return new Promise((s,o)=>{if(e.src)if(/^data\:/i.test(e.src))t=kt(e.src),s(t);else if(/^blob\:/i.test(e.src)){var a=new FileReader;a.onload=function(r){t=r.target.result,s(t)},Tt(e.src,function(r){a.readAsArrayBuffer(r)})}else{var i=new XMLHttpRequest;i.onload=function(){if(this.status==200||this.status===0)t=i.response,s(t);else throw"Could not load image";i=null},i.open("GET",e.src,!0),i.responseType="arraybuffer",i.send(null)}else o("img error")})}function Tt(e,t){var s=new XMLHttpRequest;s.open("GET",e,!0),s.responseType="blob",s.onload=function(o){(this.status==200||this.status===0)&&t(this.response)},s.send()}function kt(e,t){t=t||e.match(/^data\:([^\;]+)\;base64,/mi)[1]||"",e=e.replace(/^data\:([^\;]+)\;base64,/gmi,"");for(var s=atob(e),o=s.length%2==0?s.length:s.length+1,a=new ArrayBuffer(o),i=new Uint16Array(a),r=0;r<o;r++)i[r]=s.charCodeAt(r);return a}function At(e,t,s){var o="",a;for(a=t,s+=t;a<s;a++)o+=String.fromCharCode(e.getUint8(a));return o}function Nt(e){var t=new DataView(e),s=t.byteLength,o,a,i,r,h,c,l,n,u,p;if(t.getUint8(0)===255&&t.getUint8(1)===216)for(u=2;u<s;){if(t.getUint8(u)===255&&t.getUint8(u+1)===225){l=u;break}u++}if(l&&(a=l+4,i=l+10,At(t,a,4)==="Exif"&&(c=t.getUint16(i),h=c===18761,(h||c===19789)&&t.getUint16(i+2,h)===42&&(r=t.getUint32(i+4,h),r>=8&&(n=i+r)))),n){for(s=t.getUint16(n,h),p=0;p<s;p++)if(u=n+p*12+2,t.getUint16(u,h)===274){u+=8,o=t.getUint16(u,h);break}}return o}const Ft=(e,t)=>{const s=e.__vccOpts||e;for(const[o,a]of t)s[o]=a;return s},Lt=T({data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:()=>[1,1]},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:()=>10,validator:function(e){return Array.isArray(e)?Number(e[0])>=0&&Number(e[1])>=0:Number(e)>=0}},fillColor:{type:String,default:""}},computed:{cropInfo(){let e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){let t=1;this.high&&!this.full&&(t=window.devicePixelRatio),this.enlarge!==1&!this.full&&(t=Math.abs(Number(this.enlarge))),e.width=e.width*t,e.height=e.height*t,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE(){return!!window.ActiveXObject||"ActiveXObject"in window},passive(){return this.isIE?null:{passive:!1}}},watch:{img(){this.checkedImg()},imgs(e){e!==""&&this.reload()},cropW(){this.showPreview()},cropH(){this.showPreview()},cropOffsertX(){this.showPreview()},cropOffsertY(){this.showPreview()},scale(e,t){this.showPreview()},x(){this.showPreview()},y(){this.showPreview()},autoCrop(e){e&&this.goAutoCrop()},autoCropWidth(){this.autoCrop&&this.goAutoCrop()},autoCropHeight(){this.autoCrop&&this.goAutoCrop()},mode(){this.checkedImg()},rotate(){this.showPreview(),this.autoCrop?this.goAutoCrop(this.cropW,this.cropH):(this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion(e){var t=navigator.userAgent.split(" "),s="";let o=0;const a=new RegExp(e,"i");for(var i=0;i<t.length;i++)a.test(t[i])&&(s=t[i]);return s?o=s.split("/")[1].split("."):o=["0","0","0"],o},checkOrientationImage(e,t,s,o){if(this.getVersion("chrome")[0]>=81)t=-1;else if(this.getVersion("safari")[0]>=605){const r=this.getVersion("version");r[0]>13&&r[1]>1&&(t=-1)}else{const r=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(r){let h=r[1];h=h.split("_"),(h[0]>13||h[0]>=13&&h[1]>=4)&&(t=-1)}}let a=document.createElement("canvas"),i=a.getContext("2d");switch(i.save(),t){case 2:a.width=s,a.height=o,i.translate(s,0),i.scale(-1,1);break;case 3:a.width=s,a.height=o,i.translate(s/2,o/2),i.rotate(180*Math.PI/180),i.translate(-s/2,-o/2);break;case 4:a.width=s,a.height=o,i.translate(0,o),i.scale(1,-1);break;case 5:a.height=s,a.width=o,i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:a.width=o,a.height=s,i.translate(o/2,s/2),i.rotate(90*Math.PI/180),i.translate(-s/2,-o/2);break;case 7:a.height=s,a.width=o,i.rotate(.5*Math.PI),i.translate(s,-o),i.scale(-1,1);break;case 8:a.height=s,a.width=o,i.translate(o/2,s/2),i.rotate(-90*Math.PI/180),i.translate(-s/2,-o/2);break;default:a.width=s,a.height=o}i.drawImage(e,0,0,s,o),i.restore(),a.toBlob(r=>{let h=URL.createObjectURL(r);URL.revokeObjectURL(this.imgs),this.imgs=h},"image/"+this.outputType,1)},checkedImg(){if(this.img===null||this.img===""){this.imgs="",this.clearCrop();return}this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();let e=new Image;if(e.onload=()=>{if(this.img==="")return this.$emit("img-load",new Error("\u56FE\u7247\u4E0D\u80FD\u4E3A\u7A7A")),!1;let s=e.width,o=e.height;Be.getData(e).then(a=>{this.orientation=a.orientation||1;let i=Number(this.maxImgSize);if(!this.orientation&&s<i&o<i){this.imgs=this.img;return}s>i&&(o=o/s*i,s=i),o>i&&(s=s/o*i,o=i),this.checkOrientationImage(e,this.orientation,s,o)}).catch(a=>{this.$emit("img-load","error"),this.$emit("img-load-error",a)})},e.onerror=s=>{this.$emit("img-load","error"),this.$emit("img-load-error",s)},this.img.substr(0,4)!=="data"&&(e.crossOrigin=""),this.isIE){var t=new XMLHttpRequest;t.onload=function(){var s=URL.createObjectURL(this.response);e.src=s},t.open("GET",this.img,!0),t.responseType="blob",t.send()}else e.src=this.img},startMove(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in e?e.clientX:e.touches[0].clientX)-this.x,this.moveY=("clientY"in e?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),e.touches.length==2&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale(e){e.preventDefault();let t=this.scale;var s={x:this.touches[0].clientX,y:this.touches[0].clientY},o={x:e.touches[0].clientX,y:e.touches[0].clientY},a={x:this.touches[1].clientX,y:this.touches[1].clientY},i={x:e.touches[1].clientX,y:e.touches[1].clientY},r=Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2)),h=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),c=h-r,l=1;l=l/this.trueWidth>l/this.trueHeight?l/this.trueHeight:l/this.trueWidth,l=l>.1?.1:l;var n=l*c;if(!this.touchNow){if(this.touchNow=!0,c>0?t+=Math.abs(n):c<0&&t>Math.abs(n)&&(t-=Math.abs(n)),this.touches=e.touches,setTimeout(()=>{this.touchNow=!1},8),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t}},cancelTouchScale(e){window.removeEventListener("touchmove",this.touchScale)},moveImg(e){if(e.preventDefault(),e.touches&&e.touches.length===2)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;let t="clientX"in e?e.clientX:e.touches[0].clientX,s="clientY"in e?e.clientY:e.touches[0].clientY,o,a;o=t-this.moveX,a=s-this.moveY,this.$nextTick(()=>{if(this.centerBox){let i=this.getImgAxis(o,a,this.scale),r=this.getCropAxis(),h=this.trueHeight*this.scale,c=this.trueWidth*this.scale,l,n,u,p;switch(this.rotate){case 1:case-1:case 3:case-3:l=this.cropOffsertX-this.trueWidth*(1-this.scale)/2+(h-c)/2,n=this.cropOffsertY-this.trueHeight*(1-this.scale)/2+(c-h)/2,u=l-h+this.cropW,p=n-c+this.cropH;break;default:l=this.cropOffsertX-this.trueWidth*(1-this.scale)/2,n=this.cropOffsertY-this.trueHeight*(1-this.scale)/2,u=l-c+this.cropW,p=n-h+this.cropH;break}i.x1>=r.x1&&(o=l),i.y1>=r.y1&&(a=n),i.x2<=r.x2&&(o=u),i.y2<=r.y2&&(a=p)}this.x=o,this.y=a,this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})})},leaveImg(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize(e){e.preventDefault();let t=this.scale;var s=e.deltaY||e.wheelDelta,o=navigator.userAgent.indexOf("Firefox");s=o>0?s*30:s,this.isIE&&(s=-s);var a=this.coe;a=a/this.trueWidth>a/this.trueHeight?a/this.trueHeight:a/this.trueWidth;var i=a*s;i<0?t+=Math.abs(i):t>Math.abs(i)&&(t-=Math.abs(i));let r=i<0?"add":"reduce";if(r!==this.coeStatus&&(this.coeStatus=r,this.coe=.2),this.scaling||(this.scalingSet=setTimeout(()=>{this.scaling=!1,this.coe=this.coe+=.01},50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},changeScale(e){let t=this.scale;e=e||1;var s=20;if(s=s/this.trueWidth>s/this.trueHeight?s/this.trueHeight:s/this.trueWidth,e=e*s,e>0?t+=Math.abs(e):t>Math.abs(e)&&(t-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,t))return!1;this.scale=t},createCrop(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,s="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick(()=>{var o=t-this.cropX,a=s-this.cropY;if(o>0?(this.cropW=o+this.cropChangeX>this.w?this.w-this.cropChangeX:o,this.cropOffsertX=this.cropChangeX):(this.cropW=this.w-this.cropChangeX+Math.abs(o)>this.w?this.cropChangeX:Math.abs(o),this.cropOffsertX=this.cropChangeX+o>0?this.cropChangeX+o:0),!this.fixed)a>0?(this.cropH=a+this.cropChangeY>this.h?this.h-this.cropChangeY:a,this.cropOffsertY=this.cropChangeY):(this.cropH=this.h-this.cropChangeY+Math.abs(a)>this.h?this.cropChangeY:Math.abs(a),this.cropOffsertY=this.cropChangeY+a>0?this.cropChangeY+a:0);else{var i=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];i+this.cropOffsertY>this.h?(this.cropH=this.h-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],o>0?this.cropOffsertX=this.cropChangeX:this.cropOffsertX=this.cropChangeX-this.cropW):this.cropH=i,this.cropOffsertY=this.cropOffsertY}})},changeCropSize(e,t,s,o,a){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=t,this.canChangeY=s,this.changeCropTypeX=o,this.changeCropTypeY=a,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow(e){e.preventDefault();var t="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,s="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;let o=this.w,a=this.h,i=0,r=0;if(this.centerBox){let l=this.getImgAxis(),n=l.x2,u=l.y2;i=l.x1>0?l.x1:0,r=l.y1>0?l.y1:0,o>n&&(o=n),a>u&&(a=u)}const[h,c]=this.checkCropLimitSize();this.$nextTick(()=>{var l=t-this.cropX,n=s-this.cropY;if(this.canChangeX&&(this.changeCropTypeX===1?this.cropOldW-l<h?(this.cropW=h,this.cropOffsertX=this.cropOldW+this.cropChangeX-i-h):this.cropOldW-l>0?(this.cropW=o-this.cropChangeX-l<=o-i?this.cropOldW-l:this.cropOldW+this.cropChangeX-i,this.cropOffsertX=o-this.cropChangeX-l<=o-i?this.cropChangeX+l:i):(this.cropW=Math.abs(l)+this.cropChangeX<=o?Math.abs(l)-this.cropOldW:o-this.cropOldW-this.cropChangeX,this.cropOffsertX=this.cropChangeX+this.cropOldW):this.changeCropTypeX===2&&(this.cropOldW+l<h?this.cropW=h:this.cropOldW+l>0?(this.cropW=this.cropOldW+l+this.cropOffsertX<=o?this.cropOldW+l:o-this.cropOffsertX,this.cropOffsertX=this.cropChangeX):(this.cropW=o-this.cropChangeX+Math.abs(l+this.cropOldW)<=o-i?Math.abs(l+this.cropOldW):this.cropChangeX-i,this.cropOffsertX=o-this.cropChangeX+Math.abs(l+this.cropOldW)<=o-i?this.cropChangeX-Math.abs(l+this.cropOldW):i))),this.canChangeY&&(this.changeCropTypeY===1?this.cropOldH-n<c?(this.cropH=c,this.cropOffsertY=this.cropOldH+this.cropChangeY-r-c):this.cropOldH-n>0?(this.cropH=a-this.cropChangeY-n<=a-r?this.cropOldH-n:this.cropOldH+this.cropChangeY-r,this.cropOffsertY=a-this.cropChangeY-n<=a-r?this.cropChangeY+n:r):(this.cropH=Math.abs(n)+this.cropChangeY<=a?Math.abs(n)-this.cropOldH:a-this.cropOldH-this.cropChangeY,this.cropOffsertY=this.cropChangeY+this.cropOldH):this.changeCropTypeY===2&&(this.cropOldH+n<c?this.cropH=c:this.cropOldH+n>0?(this.cropH=this.cropOldH+n+this.cropOffsertY<=a?this.cropOldH+n:a-this.cropOffsertY,this.cropOffsertY=this.cropChangeY):(this.cropH=a-this.cropChangeY+Math.abs(n+this.cropOldH)<=a-r?Math.abs(n+this.cropOldH):this.cropChangeY-r,this.cropOffsertY=a-this.cropChangeY+Math.abs(n+this.cropOldH)<=a-r?this.cropChangeY-Math.abs(n+this.cropOldH):r))),this.canChangeX&&this.fixed){var u=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];u<c?(this.cropH=c,this.cropW=this.fixedNumber[0]*c/this.fixedNumber[1],this.changeCropTypeX===1&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):u+this.cropOffsertY>a?(this.cropH=a-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],this.changeCropTypeX===1&&(this.cropOffsertX=this.cropChangeX+(this.cropOldW-this.cropW))):this.cropH=u}if(this.canChangeY&&this.fixed){var p=this.cropH/this.fixedNumber[1]*this.fixedNumber[0];p<h?(this.cropW=h,this.cropH=this.fixedNumber[1]*h/this.fixedNumber[0],this.cropOffsertY=this.cropOldH+this.cropChangeY-this.cropH):p+this.cropOffsertX>o?(this.cropW=o-this.cropOffsertX,this.cropH=this.cropW/this.fixedNumber[0]*this.fixedNumber[1]):this.cropW=p}})},checkCropLimitSize(){let{cropW:e,cropH:t,limitMinSize:s}=this,o=new Array;return Array.isArray(s)?o=s:o=[s,s],e=parseFloat(o[0]),t=parseFloat(o[1]),[e,t]},changeCropEnd(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},calculateSize(e,t,s,o,a,i){const r=e/t;let h=a,c=i;return h<s&&(h=s,c=Math.ceil(h/r)),c<o&&(c=o,h=Math.ceil(c*r),h<s&&(h=s,c=Math.ceil(h/r))),h<a&&(h=a,c=Math.ceil(h/r)),c<i&&(c=i,h=Math.ceil(c*r)),{width:h,height:c}},endCrop(){this.cropW===0&&this.cropH===0&&(this.cropping=!1);let[e,t]=this.checkCropLimitSize();const{width:s,height:o}=this.fixed?this.calculateSize(this.fixedNumber[0],this.fixedNumber[1],e,t,this.cropW,this.cropH):{width:e,height:t};s>this.cropW&&(this.cropW=s,this.cropOffsertX+s>this.w&&(this.cropOffsertX=this.w-s)),o>this.cropH&&(this.cropH=o,this.cropOffsertY+o>this.h&&(this.cropOffsertY=this.h-o)),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop(){this.crop=!0},stopCrop(){this.crop=!1},clearCrop(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&e.touches.length===2)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);let t="clientX"in e?e.clientX:e.touches[0].clientX,s="clientY"in e?e.clientY:e.touches[0].clientY,o,a;o=t-this.cropOffsertX,a=s-this.cropOffsertY,this.cropX=o,this.cropY=a,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop(e,t){let s=0,o=0;e&&(e.preventDefault(),s="clientX"in e?e.clientX:e.touches[0].clientX,o="clientY"in e?e.clientY:e.touches[0].clientY),this.$nextTick(()=>{let a,i,r=s-this.cropX,h=o-this.cropY;if(t&&(r=this.cropOffsertX,h=this.cropOffsertY),r<=0?a=0:r+this.cropW>this.w?a=this.w-this.cropW:a=r,h<=0?i=0:h+this.cropH>this.h?i=this.h-this.cropH:i=h,this.centerBox){let c=this.getImgAxis();a<=c.x1&&(a=c.x1),a+this.cropW>c.x2&&(a=c.x2-this.cropW),i<=c.y1&&(i=c.y1),i+this.cropH>c.y2&&(i=c.y2-this.cropH)}this.cropOffsertX=a,this.cropOffsertY=i,this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})})},getImgAxis(e,t,s){e=e||this.x,t=t||this.y,s=s||this.scale;let o={x1:0,x2:0,y1:0,y2:0},a=this.trueWidth*s,i=this.trueHeight*s;switch(this.rotate){case 0:o.x1=e+this.trueWidth*(1-s)/2,o.x2=o.x1+this.trueWidth*s,o.y1=t+this.trueHeight*(1-s)/2,o.y2=o.y1+this.trueHeight*s;break;case 1:case-1:case 3:case-3:o.x1=e+this.trueWidth*(1-s)/2+(a-i)/2,o.x2=o.x1+this.trueHeight*s,o.y1=t+this.trueHeight*(1-s)/2+(i-a)/2,o.y2=o.y1+this.trueWidth*s;break;default:o.x1=e+this.trueWidth*(1-s)/2,o.x2=o.x1+this.trueWidth*s,o.y1=t+this.trueHeight*(1-s)/2,o.y2=o.y1+this.trueHeight*s;break}return o},getCropAxis(){let e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked(e){let t=document.createElement("canvas"),s=new Image,o=this.rotate,a=this.trueWidth,i=this.trueHeight,r=this.cropOffsertX,h=this.cropOffsertY;s.onload=()=>{if(this.cropW!==0){let n=t.getContext("2d"),u=1;this.high&!this.full&&(u=window.devicePixelRatio),this.enlarge!==1&!this.full&&(u=Math.abs(Number(this.enlarge)));let p=this.cropW*u,g=this.cropH*u,b=a*this.scale*u,f=i*this.scale*u,m=(this.x-r+this.trueWidth*(1-this.scale)/2)*u,w=(this.y-h+this.trueHeight*(1-this.scale)/2)*u;switch(l(p,g),n.save(),this.fillColor&&(n.fillStyle=this.fillColor,n.fillRect(0,0,t.width,t.height)),o){case 0:this.full?(l(p/this.scale,g/this.scale),n.drawImage(s,m/this.scale,w/this.scale,b/this.scale,f/this.scale)):n.drawImage(s,m,w,b,f);break;case 1:case-3:this.full?(l(p/this.scale,g/this.scale),m=m/this.scale+(b/this.scale-f/this.scale)/2,w=w/this.scale+(f/this.scale-b/this.scale)/2,n.rotate(o*90*Math.PI/180),n.drawImage(s,w,-m-f/this.scale,b/this.scale,f/this.scale)):(m=m+(b-f)/2,w=w+(f-b)/2,n.rotate(o*90*Math.PI/180),n.drawImage(s,w,-m-f,b,f));break;case 2:case-2:this.full?(l(p/this.scale,g/this.scale),n.rotate(o*90*Math.PI/180),m=m/this.scale,w=w/this.scale,n.drawImage(s,-m-b/this.scale,-w-f/this.scale,b/this.scale,f/this.scale)):(n.rotate(o*90*Math.PI/180),n.drawImage(s,-m-b,-w-f,b,f));break;case 3:case-1:this.full?(l(p/this.scale,g/this.scale),m=m/this.scale+(b/this.scale-f/this.scale)/2,w=w/this.scale+(f/this.scale-b/this.scale)/2,n.rotate(o*90*Math.PI/180),n.drawImage(s,-w-b/this.scale,m,b/this.scale,f/this.scale)):(m=m+(b-f)/2,w=w+(f-b)/2,n.rotate(o*90*Math.PI/180),n.drawImage(s,-w-b,m,b,f));break;default:this.full?(l(p/this.scale,g/this.scale),n.drawImage(s,m/this.scale,w/this.scale,b/this.scale,f/this.scale)):n.drawImage(s,m,w,b,f)}n.restore()}else{let n=a*this.scale,u=i*this.scale,p=t.getContext("2d");switch(p.save(),this.fillColor&&(p.fillStyle=this.fillColor,p.fillRect(0,0,t.width,t.height)),o){case 0:l(n,u),p.drawImage(s,0,0,n,u);break;case 1:case-3:l(u,n),p.rotate(o*90*Math.PI/180),p.drawImage(s,0,-u,n,u);break;case 2:case-2:l(n,u),p.rotate(o*90*Math.PI/180),p.drawImage(s,-n,-u,n,u);break;case 3:case-1:l(u,n),p.rotate(o*90*Math.PI/180),p.drawImage(s,-n,0,n,u);break;default:l(n,u),p.drawImage(s,0,0,n,u)}p.restore()}e(t)};var c=this.img.substr(0,4);c!=="data"&&(s.crossOrigin="Anonymous"),s.src=this.imgs;function l(n,u){t.width=Math.round(n),t.height=Math.round(u)}},getCropData(e){this.getCropChecked(t=>{e(t.toDataURL("image/"+this.outputType,this.outputSize))})},getCropBlob(e){this.getCropChecked(t=>{t.toBlob(s=>e(s),"image/"+this.outputType,this.outputSize)})},showPreview(){if(this.isCanShow)this.isCanShow=!1,setTimeout(()=>{this.isCanShow=!0},16);else return!1;let e=this.cropW,t=this.cropH,s=this.scale;var o={};o.div={width:`${e}px`,height:`${t}px`};let a=(this.x-this.cropOffsertX)/s,i=(this.y-this.cropOffsertY)/s,r=0;o.w=e,o.h=t,o.url=this.imgs,o.img={width:`${this.trueWidth}px`,height:`${this.trueHeight}px`,transform:`scale(${s})translate3d(${a}px, ${i}px, ${r}px)rotateZ(${this.rotate*90}deg)`},o.html=`
      <div class="show-preview" style="width: ${o.w}px; height: ${o.h}px,; overflow: hidden">
        <div style="width: ${e}px; height: ${t}px">
          <img src=${o.url} style="width: ${this.trueWidth}px; height: ${this.trueHeight}px; transform:
          scale(${s})translate3d(${a}px, ${i}px, ${r}px)rotateZ(${this.rotate*90}deg)">
        </div>
      </div>`,this.$emit("real-time",o)},reload(){let e=new Image;e.onload=()=>{this.w=parseFloat(window.getComputedStyle(this.$refs.cropper).width),this.h=parseFloat(window.getComputedStyle(this.$refs.cropper).height),this.trueWidth=e.width,this.trueHeight=e.height,this.original?this.scale=1:this.scale=this.checkedMode(),this.$nextTick(()=>{this.x=-(this.trueWidth-this.trueWidth*this.scale)/2+(this.w-this.trueWidth*this.scale)/2,this.y=-(this.trueHeight-this.trueHeight*this.scale)/2+(this.h-this.trueHeight*this.scale)/2,this.loading=!1,this.autoCrop&&this.goAutoCrop(),this.$emit("img-load","success"),setTimeout(()=>{this.showPreview()},20)})},e.onerror=()=>{this.$emit("img-load","error")},e.src=this.imgs},checkedMode(){let e=1,t=this.trueWidth,s=this.trueHeight;const o=this.mode.split(" ");switch(o[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":t=this.w,e=t/this.trueWidth,s=s*e,s<this.h&&(s=this.h,e=s/this.trueHeight);break;default:try{let a=o[0];if(a.search("px")!==-1){a=a.replace("px",""),t=parseFloat(a);const i=t/this.trueWidth;let r=1,h=o[1];h.search("px")!==-1&&(h=h.replace("px",""),s=parseFloat(h),r=s/this.trueHeight),e=Math.min(i,r)}if(a.search("%")!==-1&&(a=a.replace("%",""),t=parseFloat(a)/100*this.w,e=t/this.trueWidth),o.length===2&&a==="auto"){let i=o[1];i.search("px")!==-1&&(i=i.replace("px",""),s=parseFloat(i),e=s/this.trueHeight),i.search("%")!==-1&&(i=i.replace("%",""),s=parseFloat(i)/100*this.h,e=s/this.trueHeight)}}catch{e=1}}return e},goAutoCrop(e,t){if(this.imgs===""||this.imgs===null)return;this.clearCrop(),this.cropping=!0;let s=this.w,o=this.h;if(this.centerBox){const r=Math.abs(this.rotate)%2>0;let h=(r?this.trueHeight:this.trueWidth)*this.scale,c=(r?this.trueWidth:this.trueHeight)*this.scale;s=h<s?h:s,o=c<o?c:o}var a=e||parseFloat(this.autoCropWidth),i=t||parseFloat(this.autoCropHeight);(a===0||i===0)&&(a=s*.8,i=o*.8),a=a>s?s:a,i=i>o?o:i,this.fixed&&(i=a/this.fixedNumber[0]*this.fixedNumber[1]),i>this.h&&(i=this.h,a=i/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(a,i)},changeCrop(e,t){if(this.centerBox){let s=this.getImgAxis();e>s.x2-s.x1&&(e=s.x2-s.x1,t=e/this.fixedNumber[0]*this.fixedNumber[1]),t>s.y2-s.y1&&(t=s.y2-s.y1,e=t/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=t,this.checkCropLimitSize(),this.$nextTick(()=>{this.cropOffsertX=(this.w-this.cropW)/2,this.cropOffsertY=(this.h-this.cropH)/2,this.centerBox&&this.moveCrop(null,!0)})},refresh(){this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick(()=>{this.checkedImg()})},rotateLeft(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear(){this.rotate=0},checkoutImgAxis(e,t,s){e=e||this.x,t=t||this.y,s=s||this.scale;let o=!0;if(this.centerBox){let a=this.getImgAxis(e,t,s),i=this.getCropAxis();a.x1>=i.x1&&(o=!1),a.x2<=i.x2&&(o=!1),a.y1>=i.y1&&(o=!1),a.y2<=i.y2&&(o=!1)}return o}},mounted(){this.support="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";let e=this;var t=navigator.userAgent;this.isIOS=!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(s,o,a){for(var i=atob(this.toDataURL(o,a).split(",")[1]),r=i.length,h=new Uint8Array(r),c=0;c<r;c++)h[c]=i.charCodeAt(c);s(new Blob([h],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},unmounted(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}}),Pt={key:0,class:"cropper-box"},zt=["src"],Dt={class:"cropper-view-box"},Rt=["src"],Ut={key:1};function Vt(e,t,s,o,a,i){return W(),B("div",{class:"vue-cropper",ref:"cropper",onMouseover:t[28]||(t[28]=(...r)=>e.scaleImg&&e.scaleImg(...r)),onMouseout:t[29]||(t[29]=(...r)=>e.cancelScale&&e.cancelScale(...r))},[e.imgs?(W(),B("div",Pt,[ce(v("div",{class:"cropper-box-canvas",style:j({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"})},[v("img",{src:e.imgs,alt:"cropper-img",ref:"cropperImg"},null,8,zt)],4),[[le,!e.loading]])])):L("",!0),v("div",{class:P(["cropper-drag-box",{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping}]),onMousedown:t[0]||(t[0]=(...r)=>e.startMove&&e.startMove(...r)),onTouchstart:t[1]||(t[1]=(...r)=>e.startMove&&e.startMove(...r))},null,34),ce(v("div",{class:"cropper-crop-box",style:j({width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"})},[v("span",Dt,[v("img",{style:j({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+e.rotate*90+"deg)"}),src:e.imgs,alt:"cropper-img"},null,12,Rt)]),v("span",{class:"cropper-face cropper-move",onMousedown:t[2]||(t[2]=(...r)=>e.cropMove&&e.cropMove(...r)),onTouchstart:t[3]||(t[3]=(...r)=>e.cropMove&&e.cropMove(...r))},null,32),e.info?(W(),B("span",{key:0,class:"crop-info",style:j({top:e.cropInfo.top})},F(e.cropInfo.width)+" \xD7 "+F(e.cropInfo.height),5)):L("",!0),e.fixedBox?L("",!0):(W(),B("span",Ut,[v("span",{class:"crop-line line-w",onMousedown:t[4]||(t[4]=r=>e.changeCropSize(r,!1,!0,0,1)),onTouchstart:t[5]||(t[5]=r=>e.changeCropSize(r,!1,!0,0,1))},null,32),v("span",{class:"crop-line line-a",onMousedown:t[6]||(t[6]=r=>e.changeCropSize(r,!0,!1,1,0)),onTouchstart:t[7]||(t[7]=r=>e.changeCropSize(r,!0,!1,1,0))},null,32),v("span",{class:"crop-line line-s",onMousedown:t[8]||(t[8]=r=>e.changeCropSize(r,!1,!0,0,2)),onTouchstart:t[9]||(t[9]=r=>e.changeCropSize(r,!1,!0,0,2))},null,32),v("span",{class:"crop-line line-d",onMousedown:t[10]||(t[10]=r=>e.changeCropSize(r,!0,!1,2,0)),onTouchstart:t[11]||(t[11]=r=>e.changeCropSize(r,!0,!1,2,0))},null,32),v("span",{class:"crop-point point1",onMousedown:t[12]||(t[12]=r=>e.changeCropSize(r,!0,!0,1,1)),onTouchstart:t[13]||(t[13]=r=>e.changeCropSize(r,!0,!0,1,1))},null,32),v("span",{class:"crop-point point2",onMousedown:t[14]||(t[14]=r=>e.changeCropSize(r,!1,!0,0,1)),onTouchstart:t[15]||(t[15]=r=>e.changeCropSize(r,!1,!0,0,1))},null,32),v("span",{class:"crop-point point3",onMousedown:t[16]||(t[16]=r=>e.changeCropSize(r,!0,!0,2,1)),onTouchstart:t[17]||(t[17]=r=>e.changeCropSize(r,!0,!0,2,1))},null,32),v("span",{class:"crop-point point4",onMousedown:t[18]||(t[18]=r=>e.changeCropSize(r,!0,!1,1,0)),onTouchstart:t[19]||(t[19]=r=>e.changeCropSize(r,!0,!1,1,0))},null,32),v("span",{class:"crop-point point5",onMousedown:t[20]||(t[20]=r=>e.changeCropSize(r,!0,!1,2,0)),onTouchstart:t[21]||(t[21]=r=>e.changeCropSize(r,!0,!1,2,0))},null,32),v("span",{class:"crop-point point6",onMousedown:t[22]||(t[22]=r=>e.changeCropSize(r,!0,!0,1,2)),onTouchstart:t[23]||(t[23]=r=>e.changeCropSize(r,!0,!0,1,2))},null,32),v("span",{class:"crop-point point7",onMousedown:t[24]||(t[24]=r=>e.changeCropSize(r,!1,!0,0,2)),onTouchstart:t[25]||(t[25]=r=>e.changeCropSize(r,!1,!0,0,2))},null,32),v("span",{class:"crop-point point8",onMousedown:t[26]||(t[26]=r=>e.changeCropSize(r,!0,!0,2,2)),onTouchstart:t[27]||(t[27]=r=>e.changeCropSize(r,!0,!0,2,2))},null,32)]))],4),[[le,e.cropping]])],544)}const jt=Ft(Lt,[["render",Vt],["__scopeId","data-v-69939069"]]);const qt={class:"message-title"},Kt={class:"handle-row"},Zt={class:"message-title"},Gt={class:"handle-row"},Jt={class:"message-title"},Qt={class:"handle-row"},es=T({name:"tabs"}),ts=T({...es,setup(e){const t=E("first"),s=ge({unread:[{date:"2024-04-19 20:00:00",title:"\u3010\u7CFB\u7EDF\u901A\u77E5\u3011\u8BE5\u7CFB\u7EDF\u5C06\u4E8E\u4ECA\u665A\u51CC\u66682\u70B9\u52305\u70B9\u8FDB\u884C\u5347\u7EA7\u7EF4\u62A4"}],read:[{date:"2024-04-19 20:00:00",title:"\u3010\u7CFB\u7EDF\u901A\u77E5\u3011\u8BE5\u7CFB\u7EDF\u5C06\u4E8E\u4ECA\u665A\u51CC\u66682\u70B9\u52305\u70B9\u8FDB\u884C\u5347\u7EA7\u7EF4\u62A4"}],recycle:[{date:"2024-04-19 20:00:00",title:"\u3010\u7CFB\u7EDF\u901A\u77E5\u3011\u8BE5\u7CFB\u7EDF\u5C06\u4E8E\u4ECA\u665A\u51CC\u66682\u70B9\u52305\u70B9\u8FDB\u884C\u5347\u7EA7\u7EF4\u62A4"}]}),o=r=>{const h=s.unread.splice(r,1);s.read=h.concat(s.read)},a=r=>{const h=s.read.splice(r,1);s.recycle=h.concat(s.recycle)},i=r=>{const h=s.recycle.splice(r,1);s.read=h.concat(s.read)};return(r,h)=>{const c=lt,l=Se,n=ut,u=$e,p=Me;return W(),et(p,{modelValue:t.value,"onUpdate:modelValue":h[0]||(h[0]=g=>t.value=g),type:"card"},{default:C(()=>[d(u,{label:`\u672A\u8BFB\u6D88\u606F(${s.unread.length})`,name:"first"},{default:C(()=>[d(n,{data:s.unread,"show-header":!1,style:{width:"100%"}},{default:C(()=>[d(c,null,{default:C(g=>[v("span",qt,F(g.row.title),1)]),_:1}),d(c,{prop:"date",width:"180"}),d(c,{width:"120"},{default:C(g=>[d(l,{size:"small",onClick:b=>o(g.$index)},{default:C(()=>[A("\u6807\u4E3A\u5DF2\u8BFB")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",Kt,[d(l,{type:"primary"},{default:C(()=>[A("\u5168\u90E8\u6807\u4E3A\u5DF2\u8BFB")]),_:1})])]),_:1},8,["label"]),d(u,{label:`\u5DF2\u8BFB\u6D88\u606F(${s.read.length})`,name:"second"},{default:C(()=>[t.value==="second"?(W(),B(be,{key:0},[d(n,{data:s.read,"show-header":!1,style:{width:"100%"}},{default:C(()=>[d(c,null,{default:C(g=>[v("span",Zt,F(g.row.title),1)]),_:1}),d(c,{prop:"date",width:"180"}),d(c,{width:"120"},{default:C(g=>[d(l,{type:"danger",size:"small",onClick:b=>a(g.$index)},{default:C(()=>[A("\u5220\u9664")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",Gt,[d(l,{type:"danger"},{default:C(()=>[A("\u5220\u9664\u5168\u90E8")]),_:1})])],64)):L("",!0)]),_:1},8,["label"]),d(u,{label:`\u56DE\u6536\u7AD9(${s.recycle.length})`,name:"third"},{default:C(()=>[t.value==="third"?(W(),B(be,{key:0},[d(n,{data:s.recycle,"show-header":!1,style:{width:"100%"}},{default:C(()=>[d(c,null,{default:C(g=>[v("span",Jt,F(g.row.title),1)]),_:1}),d(c,{prop:"date",width:"180"}),d(c,{width:"120"},{default:C(g=>[d(l,{size:"small",onClick:b=>i(g.$index)},{default:C(()=>[A("\u8FD8\u539F")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),v("div",Qt,[d(l,{type:"danger"},{default:C(()=>[A("\u6E05\u7A7A\u56DE\u6536\u7AD9")]),_:1})])],64)):L("",!0)]),_:1},8,["label"])]),_:1},8,["modelValue"])}}});const Ie=e=>(st("data-v-af4ff6f5"),e=e(),it(),e),ss={class:"user-container"},is=Ie(()=>v("div",{class:"user-profile-bg"},null,-1)),os={class:"user-avatar-wrap"},as={class:"user-info"},rs={class:"info-name"},ns={class:"info-desc"},hs=Ie(()=>v("span",null,"@lin-xin",-1)),cs={class:"user-footer"},ls={class:"user-footer-item"},us={class:"user-footer-item"},ps={class:"user-footer-item"},ds={key:0,class:"crop-wrap"},fs=T({name:"ucenter"}),gs=T({...fs,setup(e){const t=localStorage.getItem("vuems_name"),s=ge({new1:"",new:"",old:""}),o=()=>{},a=E("label1"),i=E(we),r=E(we),h=E(""),c=E(),l=u=>{const p=u.target.files[0];if(!p.type.includes("image/"))return;const g=new FileReader;g.onload=b=>{r.value=b.target.result,c.value&&c.value.replace(b.target.result)},g.readAsDataURL(p)},n=()=>{i.value=h.value};return(u,p)=>{const g=tt,b=pt,f=ct,m=wt,w=ht,S=$e,Y=Se,z=nt,R=at,oe=rt,Q=Me;return W(),B("div",null,[v("div",ss,[d(w,{class:"user-profile",shadow:"hover","body-style":{padding:"0px"}},{default:C(()=>[is,v("div",os,[d(g,{class:"user-avatar",size:120,src:i.value},null,8,["src"])]),v("div",as,[v("div",rs,F(O(t)),1),v("div",ns,[hs,d(b,{direction:"vertical"}),d(f,{href:"",target:"_blank"},{default:C(()=>[A("chen")]),_:1})])]),v("div",cs,[v("div",ls,[d(m,{title:"\u5728\u804C\u5929\u6570",value:1800})]),v("div",us,[d(m,{title:"\u8FD0\u884C\u5929\u6570",value:666})]),v("div",ps,[d(m,{title:"\u63D0\u4EA4\u4EFB\u52A1\u91CF",value:888})])])]),_:1}),d(w,{class:"user-content",shadow:"hover","body-style":{padding:"20px 50px",height:"100%",boxSizing:"border-box"}},{default:C(()=>[d(Q,{"tab-position":"left",modelValue:a.value,"onUpdate:modelValue":p[3]||(p[3]=k=>a.value=k)},{default:C(()=>[d(S,{name:"label1",label:"\u6D88\u606F\u901A\u77E5",class:"user-tabpane"},{default:C(()=>[d(ts)]),_:1}),d(S,{name:"label2",label:"\u6211\u7684\u5934\u50CF",class:"user-tabpane"},{default:C(()=>[a.value==="label2"?(W(),B("div",ds,[d(O(jt),{ref_key:"cropper",ref:c,img:r.value,autoCrop:!0,centerBox:!0,full:!0,mode:"contain"},null,8,["img"])])):L("",!0),d(Y,{class:"crop-demo-btn",type:"primary"},{default:C(()=>[A("\u9009\u62E9\u56FE\u7247 "),v("input",{class:"crop-input",type:"file",name:"image",accept:"image/*",onChange:l},null,32)]),_:1}),d(Y,{type:"success",onClick:n},{default:C(()=>[A("\u4E0A\u4F20\u5E76\u4FDD\u5B58")]),_:1})]),_:1}),d(S,{name:"label3",label:"\u4FEE\u6539\u5BC6\u7801",class:"user-tabpane"},{default:C(()=>[d(oe,{class:"w500","label-position":"top"},{default:C(()=>[d(R,{label:"\u65E7\u5BC6\u7801\uFF1A"},{default:C(()=>[d(z,{type:"password",modelValue:s.old,"onUpdate:modelValue":p[0]||(p[0]=k=>s.old=k)},null,8,["modelValue"])]),_:1}),d(R,{label:"\u65B0\u5BC6\u7801\uFF1A"},{default:C(()=>[d(z,{type:"password",modelValue:s.new,"onUpdate:modelValue":p[1]||(p[1]=k=>s.new=k)},null,8,["modelValue"])]),_:1}),d(R,{label:"\u786E\u8BA4\u65B0\u5BC6\u7801\uFF1A"},{default:C(()=>[d(z,{type:"password",modelValue:s.new1,"onUpdate:modelValue":p[2]||(p[2]=k=>s.new1=k)},null,8,["modelValue"])]),_:1}),d(R,null,{default:C(()=>[d(Y,{type:"primary",onClick:o},{default:C(()=>[A("\u4FDD\u5B58")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])])}}});const Xs=ot(gs,[["__scopeId","data-v-af4ff6f5"]]);export{Xs as default};
